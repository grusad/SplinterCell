[gd_scene load_steps=10 format=2]

[ext_resource path="res://assets/gridtiles.meshlib" type="MeshLibrary" id=1]
[ext_resource path="res://src/Entity/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://src/Entity/DummyEnemy.tscn" type="PackedScene" id=3]
[ext_resource path="res://src/Entity/OmniLightSource.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/Test.gd" type="Script" id=5]

[sub_resource type="NavigationMesh" id=1]
vertices = PoolVector3Array( 5.9, 0.4, -8.2553, 6.5, 0.4, -8.2553, 6.4, 0.4, -13.7553, 5.8, 0.4, -7.8553, 5.9, 0.4, -8.2553, 6.4, 0.4, -13.7553, -1.7, 0.4, -13.7553, -1.7, 0.4, -7.8553, 6.5, 0.4, -8.2553, 9.7, 0.4, -8.2553, 9.7, 0.4, -13.7553, 6.4, 0.4, -13.7553, -2.1, 2.4, -4.5553, -2.2, 2.4, -7.9553, -7.8, 2.4, -7.8553, -7.8, 2.4, -4.4553, 2.6, 0.4, -0.455297, 2.7, 0.4, -0.155297, 3.3, 0.4, -0.155297, 2.6, 0.4, -0.455297, 3.3, 0.4, -0.155297, 3.4, 0.4, -0.455297, -0.8, 0.4, -4.2553, -0.422222, 0.8, -3.83308, -0.0444441, 0.4, -3.41085, 0.04, 0.4, -3.4953, -0.38, 0.8, -3.8753, -1.7, 0.4, -0.255298, -0.5, 0.4, -0.255298, -0.4, 0.4, -0.455297, -0.8, 0.4, -1.7553, -1.7, 0.4, -1.7553, -0.8, 0.4, -4.2553, -0.8, 1.2, -3.8553, -0.4, 0.4, -0.455297, 2.6, 0.4, -0.455297, -0.0444441, 0.4, -3.41085, -0.422222, 0.8, -3.83308, -0.6, 1, -2.1553, -0.533333, 0.4, -1.58863, -0.8, 0.4, -4.2553, 3.4, 0.4, -0.455297, 4, 0.4, -0.455297, 5.8, 0.4, -7.6553, 5.8, 0.4, -7.8553, -1.7, 0.4, -7.8553, -0.38, 0.8, -3.8753, 0.04, 0.4, -3.4953, -0.8, 1.2, -2.1553, -0.8, 0.4, -1.7553, -0.4, 0.4, -0.455297, -0.666667, 0.4, -1.58863, -1.4, 2, -3.8553, -1.4, 2, -2.1553, -0.8, 1.2, -2.1553, -0.8, 1.2, -3.8553, -1.7, 0.4, -7.8553, -1.7, 0.4, -4.2553, -0.8, 0.4, -4.2553, -0.8, 1.2, -3.8553, -0.8, 1.2, -2.1553, -0.4, 0.4, -0.455297, -0.533333, 0.4, -1.58863, -0.6, 1, -2.1553, -0.666667, 0.4, -1.58863, 12.1, 0.4, -5.2553, 12.1, 0.4, -4.6553, 12.5, 0.4, -4.5553, 12.5, 0.4, -5.3553, 12.5, 0.4, -4.5553, 12.5, 0.4, 0.444702, 15.8, 0.4, 0.644703, 15.8, 0.4, -7.8553, 12.5, 0.4, 0.444702, 12.3, 0.4, 0.544703, 15.8, 0.4, 0.644703, 15.8, 0.4, -7.8553, 12.5, 0.4, -7.8553, 12.5, 0.4, -5.3553, 15.8, 0.4, -7.8553, 12.5, 0.4, -5.3553, 12.5, 0.4, -4.5553, 4, 0.4, -0.455297, 4.2, 0.4, -0.255298, 6, 0.4, -7.4553, 5.8, 0.4, -7.6553, 11.7, 0.4, -4.5553, 12.1, 0.4, -4.6553, 12.1, 0.4, -5.2553, 11.7, 0.4, -5.3553, 4.2, 0.4, -0.255298, 4.2, 0.4, -0.0552979, 9.8, 0.4, -0.0552979, 11.7, 0.4, -5.3553, 11.7, 0.4, -7.4553, 6, 0.4, -7.4553, 9.9, 0.4, -0.255298, 11.7, 0.4, -0.255298, 11.7, 0.4, -4.5553, 9.8, 0.4, -0.0552979, 9.9, 0.4, -0.255298, 11.7, 0.4, -4.5553, 11.7, 0.4, -5.3553, -2.1, 2.4, -2.0553, -1.4, 2, -2.1553, -1.4, 2, -3.8553, -2.1, 2.4, -3.9553, -7.8, 2.4, -4.4553, -7.8, 2.4, -1.5553, -2.1, 2.4, -3.9553, -2.1, 2.4, -4.5553, -7.8, 2.4, -4.4553, -7.8, 2.4, -1.5553, -2.1, 2.4, -1.4553, -2.1, 2.4, -2.0553, -2.2, 2.4, 0.244702, -2, 2.4, 0.144703, -2.1, 2.4, -1.4553, -7.8, 2.4, -1.5553, -7.8, 2.4, 1.8447, -7.8, 2.4, 1.8447, -2.2, 2.4, 1.8447, -2.2, 2.4, 0.244702, 3.4, 0.4, 0.244702, 3.3, 0.4, -0.155297, 2.7, 0.4, -0.155297, 2.6, 0.4, 0.244702, 0.3, 0.4, 5.7447, 5.7, 0.4, 5.7447, 5.7, 0.4, 3.9447, 2.6, 0.4, 0.244702, 0.3, 0.4, 0.244702, 5.7, 0.4, 3.9447, 4, 0.4, 0.244702, 3.4, 0.4, 0.244702, 5.7, 0.4, 3.9447, 3.4, 0.4, 0.244702, 2.6, 0.4, 0.244702, 9.7, 0.4, 0.844703, 10, 0.4, 0.544703, 9.8, 0.4, 0.444702, 9.7, 0.4, 0.844703, 9.8, 0.4, 0.444702, 9.8, 0.4, -0.0552979, 4, 0.4, 0.244702, 5.7, 0.4, 3.9447, 5.8, 0.4, 3.7447, 4.2, 0.4, -0.0552979, 4, 0.4, 0.244702, 5.8, 0.4, 3.7447, 6.3, 0.4, 3.7447, 9.7, 0.4, 0.844703, 9.8, 0.4, -0.0552979, 12.3, 0.4, 0.544703, 10, 0.4, 0.544703, 9.7, 0.4, 0.844703, 13.8, 0.4, 5.9447, 15.8, 0.4, 5.8447, 15.8, 0.4, 0.644703, 12.3, 0.4, 0.544703, 9.7, 0.4, 0.844703, 8.2, 0.4, 6.0447, 8.2, 0.4, 6.0447, 8.2, 0.4, 7.8447, 13.8, 0.4, 7.8447, 13.8, 0.4, 5.9447, 6.5, 0.4, 3.8447, 6.5, 0.4, 5.8447, 8.1, 0.4, 5.8447, 9.7, 0.4, 0.844703, 9.7, 0.4, 0.844703, 6.3, 0.4, 3.7447, 6.5, 0.4, 3.8447, 8.1, 0.4, 5.8447, 8.2, 0.4, 6.0447, 9.7, 0.4, 0.844703 )
polygons = [ PoolIntArray( 2, 1, 0 ), PoolIntArray( 4, 3, 5 ), PoolIntArray( 5, 3, 7 ), PoolIntArray( 5, 7, 6 ), PoolIntArray( 9, 8, 10 ), PoolIntArray( 10, 8, 11 ), PoolIntArray( 13, 12, 14 ), PoolIntArray( 14, 12, 15 ), PoolIntArray( 18, 17, 16 ), PoolIntArray( 22, 26, 23 ), PoolIntArray( 23, 26, 25 ), PoolIntArray( 23, 25, 24 ), PoolIntArray( 24, 25, 19 ), PoolIntArray( 19, 25, 21 ), PoolIntArray( 19, 21, 20 ), PoolIntArray( 28, 27, 29 ), PoolIntArray( 29, 27, 30 ), PoolIntArray( 30, 27, 31 ), PoolIntArray( 32, 37, 33 ), PoolIntArray( 33, 37, 36 ), PoolIntArray( 33, 36, 38 ), PoolIntArray( 38, 36, 39 ), PoolIntArray( 39, 36, 34 ), PoolIntArray( 34, 36, 35 ), PoolIntArray( 40, 45, 46 ), PoolIntArray( 46, 45, 47 ), PoolIntArray( 47, 45, 41 ), PoolIntArray( 41, 45, 42 ), PoolIntArray( 42, 45, 43 ), PoolIntArray( 43, 45, 44 ), PoolIntArray( 48, 51, 49 ), PoolIntArray( 49, 51, 50 ), PoolIntArray( 55, 54, 52 ), PoolIntArray( 52, 54, 53 ), PoolIntArray( 58, 57, 56 ), PoolIntArray( 61, 64, 62 ), PoolIntArray( 62, 64, 63 ), PoolIntArray( 63, 64, 60 ), PoolIntArray( 63, 60, 59 ), PoolIntArray( 65, 68, 66 ), PoolIntArray( 66, 68, 67 ), PoolIntArray( 70, 69, 71 ), PoolIntArray( 71, 69, 72 ), PoolIntArray( 75, 74, 73 ), PoolIntArray( 78, 77, 76 ), PoolIntArray( 81, 80, 79 ), PoolIntArray( 85, 84, 82 ), PoolIntArray( 82, 84, 83 ), PoolIntArray( 87, 86, 88 ), PoolIntArray( 88, 86, 89 ), PoolIntArray( 91, 90, 92 ), PoolIntArray( 92, 90, 93 ), PoolIntArray( 93, 90, 94 ), PoolIntArray( 94, 90, 95 ), PoolIntArray( 98, 97, 96 ), PoolIntArray( 100, 99, 101 ), PoolIntArray( 101, 99, 102 ), PoolIntArray( 104, 103, 105 ), PoolIntArray( 105, 103, 106 ), PoolIntArray( 106, 103, 108 ), PoolIntArray( 106, 108, 107 ), PoolIntArray( 111, 110, 109 ), PoolIntArray( 114, 113, 112 ), PoolIntArray( 116, 115, 117 ), PoolIntArray( 117, 115, 118 ), PoolIntArray( 118, 115, 119 ), PoolIntArray( 122, 121, 120 ), PoolIntArray( 125, 124, 126 ), PoolIntArray( 126, 124, 123 ), PoolIntArray( 128, 127, 129 ), PoolIntArray( 129, 127, 130 ), PoolIntArray( 130, 127, 131 ), PoolIntArray( 134, 133, 132 ), PoolIntArray( 137, 136, 135 ), PoolIntArray( 139, 138, 140 ), PoolIntArray( 143, 142, 141 ), PoolIntArray( 146, 145, 144 ), PoolIntArray( 148, 147, 149 ), PoolIntArray( 149, 147, 150 ), PoolIntArray( 150, 147, 151 ), PoolIntArray( 151, 147, 152 ), PoolIntArray( 155, 154, 153 ), PoolIntArray( 159, 158, 160 ), PoolIntArray( 160, 158, 157 ), PoolIntArray( 160, 157, 156 ), PoolIntArray( 160, 156, 161 ), PoolIntArray( 163, 162, 164 ), PoolIntArray( 164, 162, 165 ), PoolIntArray( 167, 166, 168 ), PoolIntArray( 168, 166, 169 ), PoolIntArray( 172, 171, 170 ), PoolIntArray( 173, 175, 174 ) ]
cell/size = 0.1
agent/height = 1.0
agent/radius = 0.2

[sub_resource type="Curve3D" id=2]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, -9.35013, -0.1, -11.6504, 0, 0, 0, 0, 0, 0, -9.35013, -0.1, -5.65043, 0, 0, 0, 0, 0, 0, -4.35013, -0.1, -5.65043, 0, 0, 0, 0, 0, 0, -0.35013, -0.1, -10.6504, 0, 0, 0, 0, 0, 0, -9.35013, -0.1, -11.6504 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0 )
}

[sub_resource type="ProceduralSky" id=3]
sky_top_color = Color( 0.0117647, 0.0117647, 0.0745098, 1 )
sky_horizon_color = Color( 0.0980392, 0.121569, 0.137255, 1 )
ground_bottom_color = Color( 0.121569, 0.121569, 0.121569, 1 )
ground_horizon_color = Color( 0.0509804, 0.0509804, 0.0509804, 1 )
sun_color = Color( 0.988235, 0.94902, 0.72549, 1 )
sun_latitude = 21.39
sun_curve = 0.00743251
sun_energy = 0.3

[sub_resource type="Environment" id=4]
background_mode = 2
background_sky = SubResource( 3 )
ambient_light_color = Color( 1, 1, 1, 1 )

[node name="Test" type="Spatial"]
script = ExtResource( 5 )

[node name="Player" parent="." instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, -4 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, 0.5, 0.866025, 0, -0.866025, 0.5, 0, 3, 0 )
visible = false
light_color = Color( 0.537255, 0.533333, 0.396078, 1 )
shadow_enabled = true

[node name="Navigation" type="Navigation" parent="."]

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 1 )

[node name="Floor" type="GridMap" parent="Navigation/NavigationMeshInstance"]
mesh_library = ExtResource( 1 )
cell_center_y = false
data = {
"cells": PoolIntArray( 0, 0, 1441795, 1, 0, 1048579, 2, 0, 1048579, 3, 0, 3, 4, 0, 3, 5, 0, 3, 6, 0, 3, 7, 0, 3, 131068, 0, 1441795, 131069, 0, 1441795, 131070, 0, 1441795, 0, 1, 1441795, 1, 1, 1048579, 2, 1, 1441795, 3, 1, 3, 4, 1, 3, 5, 1, 3, 6, 1, 3, 7, 1, 3, 0, 2, 1441795, 1, 2, 1441795, 2, 2, 1441795, 3, 2, 3, 4, 2, 3, 5, 2, 3, 6, 2, 3, 7, 2, 3, 4, 3, 3, 5, 3, 3, 6, 3, 3, 0, 65529, 3, 1, 65529, 3, 2, 65529, 3, 3, 65529, 3, 4, 65529, 3, 65535, 65529, 3, 0, 65530, 3, 1, 65530, 3, 2, 65530, 3, 3, 65530, 3, 4, 65530, 3, 65535, 65530, 3, 0, 65531, 3, 1, 65531, 3, 2, 65531, 3, 3, 65531, 3, 4, 65531, 3, 65535, 65531, 3, 0, 65532, 3, 1, 65532, 3, 2, 65532, 3, 3, 65532, 3, 4, 65532, 3, 5, 65532, 3, 6, 65532, 3, 7, 65532, 1048579, 65535, 65532, 3, 131068, 65532, 1441795, 131069, 65532, 1441795, 131070, 65532, 1441795, 0, 65533, 3, 1, 65533, 3, 2, 65533, 3, 3, 65533, 3, 4, 65533, 3, 5, 65533, 3, 6, 65533, 3, 7, 65533, 1048579, 65535, 65533, 3, 131068, 65533, 1441795, 131069, 65533, 1441795, 131070, 65533, 1441795, 0, 65534, 3, 1, 65534, 3, 2, 65534, 3, 3, 65534, 3, 4, 65534, 3, 5, 65534, 3, 6, 65534, 3, 7, 65534, 1048579, 65535, 65534, 1441796, 131068, 65534, 1441795, 131069, 65534, 1441795, 131070, 65534, 1441795, 0, 65535, 3, 1, 65535, 3, 2, 65535, 1048579, 3, 65535, 3, 4, 65535, 3, 5, 65535, 3, 6, 65535, 3, 7, 65535, 3, 65535, 65535, 3, 131068, 65535, 538312707, 131069, 65535, 538312707, 131070, 65535, 1441795 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, 1, 0 )
}

[node name="Wall" type="GridMap" parent="Navigation/NavigationMeshInstance"]
mesh_library = ExtResource( 1 )
cell_size = Vector3( 1, 1, 1 )
cell_center_x = false
cell_center_y = false
cell_center_z = false
data = {
"cells": PoolIntArray( 1, 0, 1441794, 3, 0, 1441793, 11, 0, 1048578, 0, 3, 0, 0, 5, 2, 3, 6, 1048576, 5, 6, 1048578, 1, 65522, 1441793, 3, 65522, 1441792, 5, 65522, 1441792, 7, 65522, 1441792, 65535, 65522, 1441794, 10, 65523, 655362, 10, 65525, 655360, 65534, 65525, 0, 65534, 65527, 0, 7, 65528, 1048576, 9, 65528, 1048578, 11, 65528, 1048576, 12, 65529, 655360, 65534, 65529, 0, 12, 65531, 655361, 65534, 65531, 0, 12, 65533, 655360, 65534, 65533, 0, 65534, 65535, 2 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, 0, 0 )
}

[node name="DummyEnemy" parent="Navigation" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 8.35013, 0.1, -1.34957 )
acceleration = 10
max_speed = 3
initial_state = "PatrolState"

[node name="Path" type="Path" parent="Navigation/DummyEnemy"]
curve = SubResource( 2 )

[node name="DummyEnemy2" parent="Navigation" instance=ExtResource( 3 )]
transform = Transform( -4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 2, 0, 2 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 4 )

[node name="OmniLightSource" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1 )

[node name="OmniLightSource2" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 5 )
